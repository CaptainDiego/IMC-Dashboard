
<%= javascript_include_tag "//www.google.com/jsapi", "chartkick" %>

<h2 class="text-center">Booking Summary</h2>
<div class="container">
  <table class="table table-striped">
    <thead>
      <tr>
        <td>Booking ID</td>
        <td>Company</td>
        <td>From</td>
        <td>To</td>
        <td>MOT</td>
      </tr>
    </thead>
    <tbody>
      <% @bookings.each do |b| %>
      <tr>
        <td>2018/<%= b.id %></td>
        <td><%= b.user.company %></td>
        <td><%= b.route.from %></td>
        <td><%= b.route.to %></td>
        <td><%= b.transport %></td>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>



<h3 class="text-center">Most popular times of Bookings</h3>
<%= area_chart Booking.group_by_hour_of_day(:created_at, format: "%l %P").count, xtitle: "Time", ytitle: "Booking" %>

<!-- <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      var count = <%= @bookings.count * 10 %>;
      var freight = <%= @bookings.first.freight %>



      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Month', 'Freight in EUR'],
          ['Jan', 1580*8],
          ['Feb', 4600*3],
          ['March', 1120*7],
          ['April', 5400*2]
        ]);

        var options = {
          title: 'Bookings overview',
          curveType: 'function',
          legend: { position: 'right' }

        };

        var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

        chart.draw(data, options);
      }
  </script>
<div class="text-center" id="curve_chart" style="width: 900px; height: 500px"></div>


 -->
